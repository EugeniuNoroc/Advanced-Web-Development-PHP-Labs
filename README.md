# Лабораторная работа №1. HTTP
# Цель работы
  - Понять, что происходит, когда пользователь открывает сайт.
  - Научиться находить и анализировать HTTP-запросы в браузере.
  - Разобраться в назначении методов GET, POST, PUT, DELETE.
# Условие
## Задание 1. Анализ HTTP-запросов. Часть 1
  1. Откройте сайт Wikipedia: https://en.wikipedia.org/wiki/HTTP
  
  2. Прочитайте статью и обратите внимание на разделы, посвященные HTTP-запросам.  
     2.1 HTTP = язык общения браузера и сервера  
     2.2 Всё работает через модель запрос → ответ  
     2.3 Метод определяет действие (GET, POST и т.д.)  
     2.4 Сервер отвечает статусом и данными  
     2.5 Запрос состоит из:
     - метода
     - заголовков
     - тела
  3. Откройте инструменты разработчика в вашем браузере (обычно это можно сделать, нажав F12 или правой кнопкой мыши выбрав "Inspect").  
  
  4. Перейдите на вкладку "Network" (Сеть).  
  
  5. Обновите страницу Wikipedia.  
  <img width="1750" height="963" alt="изображение" src="https://github.com/user-attachments/assets/7abb4364-9c96-47a3-9b38-2a8a518da864" />
  
  6. Найдите первый запрос к странице, он будет назван как HTTP и изучите следующие аспекты:

- URL запроса  
  https://ru.wikipedia.org/wiki/HTTP  

- Метод запроса. Почему именно данный метод используется для загрузки страницы?  
  Использован метод GET для получения информации с сервера.  

- Статус ответа. Что означает статус ответа?  
  Код 200 — запрос успешно обработан, OK — сервер вернул страницу.  

- Заголовки запроса и ответа. Какие заголовки присутствуют и какую информацию они содержат?  
  Host: ru.wikipedia.org — к какому серверу идёт запрос  
  User-Agent — браузер и ОС пользователя  
  Accept — какие типы данных клиент готов принять  
  Accept-Language — предпочтительный язык (ru)  
  Accept-Encoding — поддержка сжатия (gzip, br и др.)  
  Cookie — данные сессии пользователя  
  Referer — откуда пришёл запрос  
  Connection: keep-alive — не закрывать соединение  

- Есть ли тело запроса или ответа? Если да, то что в нем содержится?  
  Тела запроса нет, GET-запросы обычно не содержат тела.  
  Тело ответа есть — HTML код страницы Wikipedia, сжат gzip, размер: 58535 байт, тип: text/html.
     <img width="1035" height="797" alt="изображение" src="https://github.com/user-attachments/assets/402469d8-a1de-4100-9918-ac8c0926096d" />  
     <img width="1036" height="366" alt="изображение" src="https://github.com/user-attachments/assets/678edaaa-f0d5-4705-9de9-2ab134dbbc48" />  
  7. Какие еще запросы были отправлены при загрузке страницы и почему?  
  При загрузке страницы браузер отправляет не только основной запрос к HTML, но и дополнительные запросы к связанным ресурсам.

  Отправляются следующие запросы:

  - CSS файлы — для оформления страницы (стили, шрифты, расположение элементов)
  - JavaScript файлы — для интерактивности и динамической работы страницы
  - Изображения — логотипы, иконки, картинки внутри статьи
  - Шрифты — для корректного отображения текста
  - favicon.ico — иконка сайта во вкладке браузера
  - API-запросы — для служебных данных (например, статистика или настройки)

  Это происходит потому, что HTML страница содержит ссылки на внешние ресурсы (через теги `<link>`, `<script>`, `<img>` и др.), и браузер автоматически загружает их отдельными HTTP-запросами для полноценного отображения страницы.  

8. Перейдите по следующему адресу: https://en.wikipedia.org/wiki/HTTPdsfdfs и повторите анализ для этого запроса. Какой статус ответа вы получили и почему?
   
  При переходе по адресу: https://en.wikipedia.org/wiki/HTTPdsfdfs был получен статус ответа: 404 Not Found  
  Это означает, что сервер успешно принял и обработал запрос, но запрашиваемый ресурс не существует.  
  Причина: URL содержит несуществующую страницу (`HTTPdsfdfs`).  
  Такой статьи нет в базе Wikipedia, поэтому сервер не может вернуть HTML содержимое и сообщает, что ресурс не найден.  
  <img width="1760" height="659" alt="изображение" src="https://github.com/user-attachments/assets/296894ca-d566-41c9-b642-d33e1251f4db" />  

## Задание 2. Анализ HTTP-запросов. Часть 2

### 1. Переход на страницу поиска
Был выполнен переход по адресу:

https://en.wikipedia.org/wiki/Special:Search

### 2. Поиск по слову *browser*

При вводе поискового запроса *browser* в строку поиска Wikipedia браузер инициирует серию GET-запросов, предназначенных для получения подсказок автодополнения.  

<img width="1555" height="209" alt="изображение" src="https://github.com/user-attachments/assets/db6fbaea-a68f-4862-b030-adda83e177bb" />  

Финальный запрос имеет следующий вид:

GET https://en.wikipedia.org/api.php  
?action=opensearch  
&format=json  
&formatversion=2  
&search=browser  
&namespace=0  
&limit=10  

Назначение элементов запроса:

- Метод `GET` используется для получения данных.
- `api.php` представляет собой точку доступа к MediaWiki API.

Передаваемые параметры:

- `action=opensearch` — выполнение поиска по названиям статей;
- `format=json` — формат ответа;
- `formatversion=2` — современная структура ответа;
- `search=browser` — поисковый запрос;
- `namespace=0` — ограничение поиска основными статьями;
- `limit=10` — максимальное количество результатов.

### 3. Поиск запроса в инструментах разработчика

Указанный запрос был обнаружен во вкладке **Network**.

Характеристики запроса:

- имя файла: `api.php`;
- параметр: `action=opensearch`;
- метод: `GET`;
- тип: `fetch / xhr`.

Данный запрос отправляется в процессе ввода текста в поле поиска.

### 4. URL запроса

Для выполнения поиска используется:

https://en.wikipedia.org/api.php  

Данный адрес является основным endpoint MediaWiki API.  
Конкретная операция определяется передаваемыми параметрами.

Использование метода `GET` обусловлено тем, что:

- выполняется только получение данных;
- состояние сервера не изменяется;
- параметры удобно передаются через URL;
- запрос может кешироваться;
- данный метод оптимален для реализации автодополнения.

### 5. Query Parameters

В запросе используются следующие параметры:

- `action=opensearch` — выполнение поиска с автодополнением;
- `format=json` — формат ответа JSON;
- `formatversion=2` — современный формат структуры;
- `search=browser` — введённый поисковый запрос;
- `namespace=0` — ограничение области поиска;
- `limit=10` — максимальное число результатов.

## Задание 3. Анализ HTTP-запросов. Часть 3

При загрузке страницы https://www.google.com выполняется ряд служебных HTTP-запросов, обеспечивающих корректную работу интерфейса и сервисов.

Основные категории запросов:

### 1. Аналитика и проверка состояния

POST www.google.com/gen_204  

Используется для передачи служебной информации и проверки состояния страницы.  
Код ответа `204` означает отсутствие содержимого.  
Метод `POST` применяется, поскольку происходит отправка данных.

### 2. Встраиваемые сервисы

GET ogs.google.com/app  

Предназначен для загрузки встроенных элементов интерфейса Google.

### 3. JavaScript-модули

GET www.gstatic.com/m=  

Используется для загрузки JavaScript-модулей через CDN gstatic.  
Большая часть ресурсов загружается из кеша.

### 4. Шрифты

GET fonts.gstatic.com/*.woff2  

Загрузка веб-шрифтов в формате WOFF2.

### 5. Изображения

GET lh3.googleusercontent.com  
GET ssl.gstatic.com  

Используются для загрузки иконок и вспомогательных изображений.

## Задание 4. Составление HTTP-запросов
### 1) GET-запрос на `http://sandbox.usm.com` с User-Agent (имя + фамилия)

GET / HTTP/1.1
Host: sandbox.usm.com
User-Agent: Eugeniu Noroc


### Что такое User-Agent?
`User-Agent` — заголовок, который сообщает серверу, **кто отправляет запрос** (браузер/приложение, ОС, версия).  
Используется для **логирования**, **аналитики**, **отладки**, иногда — для выдачи разного контента под разные клиенты.

### 2) POST-запрос на `http://sandbox.usm.com/cars` с параметрами в теле

### Вариант JSON (чаще в API)
POST /cars HTTP/1.1
Host: sandbox.usm.com
Content-Type: application/json
User-Agent: Eugeniu Noroc

{
  "make": "Toyota",
  "model": "Corolla",
  "year": 2020
}

### Какие еще методы HTTP существуют?
- `GET` — получить ресурс
- `POST` — создать ресурс / отправить данные на обработку
- `PUT` — полностью заменить ресурс (создать, если отсутствует — зависит от API)
- `PATCH` — частично изменить ресурс
- `DELETE` — удалить ресурс
- `HEAD` — как GET, но без тела ответа (только заголовки)
- `OPTIONS` — узнать, какие методы/опции поддерживает сервер для ресурса

### 3) PUT-запрос на `http://sandbox.usm.com/cars/1` (JSON + User-Agent)

PUT /cars/1 HTTP/1.1
Host: sandbox.usm.com
User-Agent: Eugeniu Noroc
Content-Type: application/json

{
  "make": "Toyota",
  "model": "Corolla",
  "year": 2021
}

### Разница PATCH и PUT
- `PUT` — **полная замена** ресурса (обычно нужно отправлять весь объект целиком).
- `PATCH` — **частичное изменение** (можно отправить только изменяемые поля).

### 4) Пример ответа сервера на запрос

Запрос:
POST /cars HTTP/1.1
Host: sandbox.com
Content-Type: application/json
User-Agent: John Doe

model=Corolla&make=Toyota&year=2020

### Один из возможных ответов (успешное создание)
HTTP/1.1 201 Created
Content-Type: application/json

{
  "id": 42,
  "make": "Toyota",
  "model": "Corolla",
  "year": 2020
}

### Когда сервер может вернуть коды 200/201/400/401/403/404/500
- `200 OK` — сервер обработал запрос, но **не создавал новый ресурс** (например, вернул результат обработки).
- `201 Created` — **создан новый ресурс** (новая запись авто).
- `400 Bad Request` — неверные данные/формат (например, `year` не число, тело невалидно, отсутствуют поля).
- `401 Unauthorized` — нужна аутентификация (нет/неверный токен, нет логина).
- `403 Forbidden` — аутентификация есть, но **нет прав** (например, нельзя создавать машины).
- `404 Not Found` — неправильный путь (например, `/cars` не существует на этом сервере).
- `500 Internal Server Error` — ошибка на сервере (падение приложения, ошибка БД, необработанное исключение).
